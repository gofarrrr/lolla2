@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Core Palette */
  --color-midnight-teal: #0C1F2C;
  --color-persimmon: #FF6B3D;
  --color-dune: #F1ECE6;
  --color-seafoam: #68DE7C;

  /* Semantic Tokens */
  --color-primary: var(--color-midnight-teal);
  --color-accent: var(--color-persimmon);
  --color-accent-glow: var(--color-seafoam);
  --color-surface: var(--color-dune);
  --color-text: var(--color-midnight-teal);
  --color-text-inverse: var(--color-dune);

  /* Spacing (4pt grid) */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-6: 24px;
  --space-8: 32px;
  --space-12: 48px;
  --space-16: 64px;
  --space-24: 96px;
  --space-32: 128px;

  /* Section Padding */
  --section-padding-y: 48px;
  --section-padding-x: 24px;

  /* Gradients */
  --gradient-cognitive: linear-gradient(135deg, var(--color-midnight-teal) 0%, var(--color-seafoam) 100%);
  --gradient-pulse: linear-gradient(135deg, #0C1F2C 0%, #1A3A4A 50%, #4FF0C6 100%);
  --gradient-hero: linear-gradient(180deg, var(--color-midnight-teal) 0%, #0A1923 100%);

  /* Shadows */
  --shadow-sm: 0 2px 4px rgba(12, 31, 44, 0.08);
  --shadow-md: 0 4px 8px rgba(12, 31, 44, 0.12);
  --shadow-lg: 0 8px 16px rgba(12, 31, 44, 0.16);
  --shadow-glow: 0 0 24px rgba(79, 240, 198, 0.4);
  --shadow-persimmon: 0 0 32px rgba(255, 107, 61, 0.3);

  /* Animation Timings */
  --duration-fast: 200ms;
  --duration-base: 300ms;
  --duration-slow: 500ms;
  --stagger-delay: 30ms;

  /* Typography Scale (clamp-based) */
  --text-xs: clamp(10px, 1vw, 12px);
  --text-sm: clamp(12px, 1.2vw, 14px);
  --text-base: clamp(14px, 1.5vw, 16px);
  --text-lg: clamp(16px, 1.8vw, 18px);
  --text-xl: clamp(20px, 2vw, 24px);
  --text-2xl: clamp(24px, 2.5vw, 32px);
  --text-3xl: clamp(32px, 3vw, 40px);
  --text-4xl: clamp(40px, 4vw, 56px);
  --text-5xl: clamp(48px, 5vw, 72px);
}

@layer base {
  /* Cognitive Intelligence Design System */
  * {
    @apply border-neutral-300;
  }

  html {
    @apply antialiased;
    scroll-behavior: smooth;
    scroll-snap-type: y proximity;
  }

  body {
    @apply bg-canvas text-ink-1 font-sans leading-normal;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold leading-tight text-ink-1;
  }

  h1 { @apply text-4xl; }
  h2 { @apply text-2xl; }
  h3 { @apply text-xl; }

  /* Focus states - green accent frames */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible {
    @apply outline-none ring-2 ring-accent-green ring-offset-2 ring-offset-canvas;
  }
}

@layer components {
  /* APPROVED DESIGN SYSTEM - Buttons */

  /* Primary Button - Accent frame only */
  .btn-primary {
    @apply px-8 py-3 bg-white text-ink-1 font-semibold text-base
           rounded-2xl border-2 border-accent-green
           shadow-[0_1px_3px_rgba(0,0,0,0.06)]
           transition-all duration-300 ease-out
           hover:shadow-[0_0_0_6px_rgba(104,222,124,0.25)] hover:-translate-y-0.5
           active:translate-y-0;
  }

  /* Secondary Button - Neutral frame */
  .btn-secondary {
    @apply px-8 py-3 bg-white text-ink-1 font-medium text-base
           rounded-2xl border border-border-default
           shadow-[0_1px_3px_rgba(0,0,0,0.05)]
           transition-all duration-300 ease-out
           hover:border-accent-green hover:shadow-[0_4px_12px_rgba(0,0,0,0.08)] hover:-translate-y-0.5
           active:translate-y-0;
  }

  /* Disabled Button */
  .btn-disabled {
    @apply px-8 py-3 bg-disabled-bg text-disabled-text font-medium text-base
           rounded-2xl border-0
           cursor-not-allowed;
  }

  /* Legacy button for gradual migration */
  .btn {
    @apply btn-secondary;
  }

  /* Accent Button - Orange frame */
  .btn-accent {
    @apply px-8 py-3 bg-white text-ink-1 font-semibold text-base
           rounded-2xl border-2 border-accent-orange
           shadow-[0_1px_3px_rgba(0,0,0,0.06)]
           transition-all duration-300 ease-out
           hover:shadow-[0_0_0_6px_rgba(255,107,61,0.25)] hover:-translate-y-0.5
           active:translate-y-0;
  }

  /* Cognitive Spinner - layered reasoning */
  .cognitive-spinner {
    @apply inline-flex flex-col items-center gap-3;
  }

  .cognitive-spinner-stack {
    @apply relative;
  }

  .cognitive-spinner-label {
    @apply uppercase tracking-[0.2em] text-text-label font-semibold;
  }

  .cognitive-layer {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    transform-origin: center;
    will-change: transform, opacity;
  }

  .cognitive-layer--base {
    width: 82%;
    height: 20%;
    border-radius: 9999px;
    background: linear-gradient(120deg, rgba(104, 222, 124, 0.9), rgba(255, 107, 61, 0.85));
    box-shadow: 0 12px 32px rgba(26, 26, 26, 0.08);
    animation: cognitiveLayerBase 1.8s ease-in-out infinite;
  }

  .cognitive-layer--middle {
    width: 60%;
    height: 60%;
    border-radius: 28px;
    background: linear-gradient(160deg, rgba(104, 222, 124, 0.18), rgba(104, 222, 124, 0.08));
    border: 1px solid rgba(104, 222, 124, 0.35);
    box-shadow: 0 14px 28px rgba(104, 222, 124, 0.18);
    animation: cognitiveLayerMiddle 1.8s ease-in-out infinite;
    animation-delay: 0.2s;
  }

  .cognitive-layer--top {
    width: 28%;
    height: 28%;
    animation: cognitiveLayerTop 1.8s ease-in-out infinite;
    animation-delay: 0.4s;
  }

  .cognitive-layer-glyph {
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 0.65rem;
    border: 2px solid rgba(255, 107, 61, 0.85);
    background: #ffffff;
    transform: rotate(45deg);
    box-shadow: 0 10px 18px rgba(255, 107, 61, 0.16);
  }

  /* APPROVED DESIGN SYSTEM - Inputs */
  .input {
    @apply w-full px-4 py-3 border border-border-default bg-white rounded-xl
           text-text-body font-normal placeholder:text-text-label
           shadow-none
           focus:outline-none focus:ring-2 focus:ring-border-focus/20 focus:border-border-focus
           transition-all duration-300;
  }

  /* APPROVED DESIGN SYSTEM - Cards */
  .card {
    @apply border border-border-default p-6 bg-white rounded-3xl
           shadow-[0_1px_3px_rgba(0,0,0,0.06)]
           hover:shadow-[0_4px_12px_rgba(0,0,0,0.08)] hover:-translate-y-1
           transition-all duration-500;
  }

  .card-active {
    @apply border-2 border-bright-green bg-card-active-bg;
  }

  /* Subtle section divider */
  .section-divider {
    @apply border-t border-neutral-200/50 my-12;
  }

  /* Soft progress bar */
  .progress-bar {
    @apply w-full h-2 bg-neutral-100 rounded-full overflow-hidden;
  }

  .progress-fill {
    @apply h-full bg-seafoam/80 rounded-full transition-all duration-500;
  }

  /* Stage Status - soft colors */
  .stage-complete {
    @apply text-seafoam/90;
  }

  .stage-active {
    @apply text-midnight-teal;
  }

  .stage-pending {
    @apply text-neutral-400;
  }

  /* Stage progress animations */
  .stage-card-active {
    position: relative;
  }

  .stage-card-active::after {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    background: linear-gradient(120deg, rgba(255, 107, 61, 0), rgba(255, 107, 61, 0.25), rgba(255, 107, 61, 0));
    opacity: 0;
    animation: stageActiveGlow 2.4s ease-in-out infinite;
  }

  .stage-card-complete {
    animation: stageCompletePulse 1.6s ease-in-out 1;
  }

  .stage-beam {
    pointer-events: none;
  }

  .stage-beam-active {
    background: radial-gradient(120% 120% at 50% 0%, rgba(255, 107, 61, 0.18), rgba(255, 107, 61, 0));
    animation: stageActiveBeam 2.4s ease-in-out infinite;
  }

  .stage-beam-complete {
    background: radial-gradient(110% 110% at 50% 0%, rgba(104, 222, 124, 0.14), rgba(104, 222, 124, 0));
  }

  .stage-badge {
    position: relative;
    z-index: 1;
  }

  .stage-badge-glow::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 9999px;
    background: rgba(255, 107, 61, 0.25);
    filter: blur(8px);
    opacity: 0;
    animation: stageBadgeGlow 2.4s ease-in-out infinite;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Cognitive gradient utilities */
  .bg-cognitive-gradient {
    background: var(--gradient-cognitive);
  }

  .bg-cognitive-pulse {
    background: var(--gradient-pulse);
    animation: cognitivePulse 3s ease-in-out infinite;
  }

  .bg-hero-gradient {
    background: var(--gradient-hero);
  }

  /* Glow effects */
  .glow-seafoam {
    box-shadow: var(--shadow-glow);
  }

  .glow-persimmon {
    box-shadow: var(--shadow-persimmon);
  }

  /* Magnetic cursor halo effect */
  .magnetic-hover {
    position: relative;
    transition: transform var(--duration-base) ease;
  }

  .magnetic-hover::after {
    content: '';
    position: absolute;
    inset: -8px;
    border-radius: inherit;
    background: radial-gradient(circle at center, rgba(79, 240, 198, 0.15), transparent 70%);
    opacity: 0;
    transition: opacity var(--duration-base) ease;
    pointer-events: none;
  }

  .magnetic-hover:hover::after {
    opacity: 1;
  }

  .magnetic-hover:hover {
    transform: scale(1.02);
  }

  /* Generous spacing utilities */
  .section-spacing {
    padding-top: var(--section-padding-y);
    padding-bottom: var(--section-padding-y);
  }

  .section-spacing-large {
    padding-top: calc(var(--section-padding-y) * 1.5);
    padding-bottom: calc(var(--section-padding-y) * 1.5);
  }

  /* Container utilities */
  .container-content {
    @apply max-w-content mx-auto px-4;
  }

  .container-wide {
    @apply max-w-wide mx-auto px-4;
  }

  /* Scroll snap utilities */
  .snap-section {
    scroll-snap-align: start;
    scroll-snap-stop: normal;
    min-height: 100vh;
    display: flex;
    align-items: center;
  }
}

/* Cognitive Pulse Animation */
@keyframes cognitivePulse {
  0%, 100% {
    background: linear-gradient(135deg, #0C1F2C 0%, #4FF0C6 100%);
    opacity: 0.6;
  }
  50% {
    background: linear-gradient(135deg, #0C1F2C 0%, #1A3A4A 50%, #4FF0C6 100%);
    opacity: 0.8;
  }
}

/* Stagger Reveal Animation */
@keyframes staggerReveal {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Cognitive Spinner Animations */
@keyframes cognitiveLayerBase {
  0%, 100% {
    transform: translate(-50%, -35%) scaleX(0.92);
    opacity: 0.45;
  }
  50% {
    transform: translate(-50%, -50%) scaleX(1);
    opacity: 1;
  }
}

@keyframes stageActiveGlow {
  0%, 100% {
    opacity: 0;
    transform: scale(0.98);
  }
  40% {
    opacity: 0.8;
    transform: scale(1);
  }
  60% {
    opacity: 0.2;
  }
}

@keyframes stageActiveBeam {
  0%, 100% {
    opacity: 0.6;
    transform: translateY(0);
  }
  50% {
    opacity: 1;
    transform: translateY(-6px);
  }
}

@keyframes stageBadgeGlow {
  0%, 100% {
    opacity: 0;
  }
  45% {
    opacity: 0.9;
  }
  70% {
    opacity: 0.15;
  }
}

@keyframes stageCompletePulse {
  0% {
    box-shadow: 0 0 0 0 rgba(104, 222, 124, 0.22);
  }
  100% {
    box-shadow: 0 0 0 16px rgba(104, 222, 124, 0);
  }
}

@keyframes cognitiveLayerMiddle {
  0%, 100% {
    transform: translate(-50%, -42%) scale(0.9);
    opacity: 0.4;
  }
  50% {
    transform: translate(-50%, -52%) scale(1);
    opacity: 1;
  }
}

@keyframes cognitiveLayerTop {
  0%, 100% {
    transform: translate(-50%, -65%) scale(0.8);
    opacity: 0.35;
  }
  50% {
    transform: translate(-50%, -52%) scale(1);
    opacity: 1;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .magnetic-hover:hover {
    transform: none;
  }
}
